---
layout: lesson
title: Advanced mathematics
category: week2
description: Gather, align, matrices, text in mathematical expressions, cases, multiline subscripts, references.
---

<div class="hide">
<notextile>
\[
	\newcommand{\field}[1]{\mathbb{#1}}
	\newcommand{\Q}{\field Q}
	\newcommand{\C}{\field C}
	\newcommand{\R}{\field R}
	\newcommand{\ideal}[1]{\mathfrak{#1}}
	\newcommand{\ggd}{\mathrm{ggd}}
	\DeclareMathOperator{\Tr}{Tr}
	\DeclareMathOperator{\ord}{ord}
\]
</notextile>
</div>

This lesson we will introduce some important new constructions for typesetting mathematics.

h2. Advanced environments

Use the @gather@ environment to put several lines in a single display. The @gather@ environment is a mathematical environment itself so it doesn't have to be put inside @\[@, @\]@ or an @equation@ environment. A new line is inserted using @\\@. If you use @gather*@ instead of @gather@ no numbers will be shown next to the formulas.

<div class="example">
\begin{gather}
f(x) = x^2 + 1 \\
g(x) = x^3 - 3
\end{gather}
</div>

{% highlight latex %}

\begin{gather}
f(x) = x^2 + 1 \\
g(x) = x^3 - 3
\end{gather}

{% endhighlight %}

If you want to align the formulas you can use @align@ or @align*@. The @align@ environment is a mathematical environment itself as well. LaTeX aligns the lines at @&@ and lines end with @\\@.

<div class="example">
\begin{align}
f(x) &= x^2 + 1 \\
g(x) &= x^3 - 3
\end{align}
</div>

{% highlight latex %}

\begin{align}
f(x) &= x^2 + 1 \\
g(x) &= x^3 - 3
\end{align}

{% endhighlight %}

h2. Matrices

*Matrices* can be made with the @pmatrix@ environment. For different brackets you can use @bmatrix@ or @vmatrix@.

<div class="example">
\[
\begin{pmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{pmatrix}
 \qquad
 \begin{bmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{bmatrix}
 \qquad
 \begin{vmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{vmatrix}
\]
</div>

{% highlight latex %}
\begin{pmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{pmatrix}

 \begin{bmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{bmatrix}
 
 \begin{vmatrix}
  a & b & c \\
  d & e & f \\
  g & h & i
 \end{vmatrix}
{% endhighlight %}

In generic matrices it is common to use dots. These can be inserted using @\cdots@ $\cdots$, @\vdots@ $\vdots$ en @\ddots@ $\ddots$.

h2. Text inside mathematics

Text in _math mode_ can be inserted using @\text@ or @\textnormal@. The command @\text@ uses the font of the current environment, @\textnormal@ uses roman. You have to be careful with whitespaces when using these commands. An illustrating example can be found below.

<div class="example">
\begin{gather*}
P := \{ \text{natural numbers $p$ such that $p$ is prime} \}\\[0.5em]
P := \{ \text{natural numbers} p \text{ such that } p \text{ is prime} \}\\[0.5em]
\end{gather*}
</div>

{% highlight latex %}
P := \{ \text{natural numbers $p$ such that $p$ is prime} \}

P := \{ \text{natural numbers } p \text{ such that } p \text{ is prime} \}
{% endhighlight %}

and an example where whitespace is left out:

<div class="example">
\[
P := \{ \text{natural numbers} p \text{such that} p \text{is prime} \}
\]
</div>

{% highlight latex %}
% Wrong:
P := \{ \text{natural numbers} p \text{such that} p \text{is prime} \}
{% endhighlight %}

h2. Cases

The following construction is used a lot when defining functions:

<div class="example">
\[
f(x) = 
\begin{cases}
x^2 & \text{if $x \geq 0$,}\\
0   & \text{otherwise.}
\end{cases}
\]
</div>

{% highlight latex %}

f(x) = 
\begin{cases}
x^2 & \text{if $x \geq 0$},\\
0   & \text{otherwise}.
\end{cases}

{% endhighlight %}

h2. Multiline subscript

To place several lines under a sum you can use @\substack@ and @\\@:

<div class="example">
\[
\sum_{\substack{
   0<i<m \\
   0<j<n
  }}
 P(i,j)
\]
</div>

{% highlight latex %}
\sum_{\substack{
0 < i < m \\
0 < j < n
}}
P(i,j)
{% endhighlight %}


h2. References

We saw that environments like @equation@ and @align@ display numbers next to the formulas. We will show how to reference these formulas. Use @\label@ to label your equations.

<div class="example">

\begin{equation}
\label{eq:polynomial}
f(x) = x^2 + 1 
\end{equation}

</div>

{% highlight latex %}

\begin{equation}
\label{eq:polynomial}
f(x) = x^2 + 1 
\end{equation}

{% endhighlight %}

It is common, but not necessary, to start labels of equations with @eq:@. Subsequently you can reference this formula with @\eqref@.

<div class="example">

The polynomial defined in \eqref{eq:polynomial} has degree 2.

</div>

{% highlight latex %}

The polynomial defined in \eqref{eq:polynomial} has degree 2.

{% endhighlight %}

If you use the package @hyperref@ references become clickable. The document viewer then jumps to the label. The package @hyperref@ also makes the table of contents clickable.

<div class="panel panel-primary">
<div class="panel-heading">
<h3 class="panel-title">Exercise</h3>
</div>
<div class="panel-body">

# Typeset the next display and its references. Where do you put the labels? (You don't have to recreate the exact numbers (6) and (7).)

<div class="example">
Define
\begin{align}
q &= 10 \label{eq:vba}\\
r &= 100. \label{eq:vbb}
\end{align}
We will use the values in \eqref{eq:vba} and \eqref{eq:vbb}.
</div>


#2 Typeset the following mathematical expressions. For some parts there is a hint: scroll over the whitespace beneath the display to see it.

<notextile>
<div class="example">
\[
\cos z = \frac{e^{iz} + e^{-iz}}{2}= \sum_{n=0}^{\infty} \frac{(-1)^nz^{2n}}{(2n)!}=1-\frac{z^2}{2!}+\frac{z^4}{4!}-\dots \text{ with radius of convergence $\infty$}
\]
</div>


<div class="example">
\[
	g(z)=
	\begin{cases}
	f(\frac{1}{z}) & \text{if $z\ne 0$};\\
	f(\infty) & \text{if $z=0$}.
	\end{cases}
	\label{eq:cont_g}
\]
</div>

<div class="hint">

Hint: Use the cases environment.

</div>

<div class="example">

\[
\Q^* = \{x\in \Q : x\not = 0\} = \Q \setminus \{0\}
\]

</div>


<div class="hint">
Hint: The $\Q$ is made in the style blackboard bold.

</div>

<div class="example">

\[
\begin{pmatrix}
a & b\\
c & d
\end{pmatrix} \cdot
\begin{pmatrix}
e & f\\
g & h
\end{pmatrix} = 
\begin{pmatrix}
ae+bg & af+bh\\
ce+dg & cf + dh
\end{pmatrix}
\]

</div>


<div class="example">

\[
\partial A = \overline{A} \setminus A^\circ
\]

</div>

<div class="hint">
Hint: This slash means something like a minus sign for sets: $A\setminus B = \{x\in A\mid x\notin B\}$

</div>

<div class="example">

\[
\Phi_n(X) = \prod_{\substack{\zeta\in\C^*:\\ \text{ord}(\zeta)=n}}(X-\zeta)
\]

</div>

<div class="hint">
Hint: use the substack command.

</div>

<div class="example">

\[
M_R = \left( \frac4\pi \right)^s \frac{n!}{n^n} \sqrt{|\Delta{(R)}|}
\]

</div>
</notextile>

Ask one of the teachers to check this exercise.

</div></div>


<div class="panel panel-success">
<div class="panel-heading">
<h3 class="panel-title">Remember</h3>
</div>
<div class="panel-body">

* @gather@, @gather*@, @align@, @align*@
* How to make matrices or cases?
* How do you insert text in mathematics?
* How to refer to equations?

</div></div>